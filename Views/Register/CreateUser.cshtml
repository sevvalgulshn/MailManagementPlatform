@model Project2EmailNight.Dtos.UserRegisterDto
@{
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
    ViewData["Title"] = "Kayıt Ol";
}

<div class="auth-main-container">
    <div class="auth-card">
        <div class="row g-0 h-100">
            <div class="col-12 col-lg-7 form-side">
                <div class="form-content-wrapper">
                    <div class="d-flex align-items-center gap-3 mb-4">
                        <div class="brand-logo-circle">
                            <img src="/images/mail.png" alt="Logo" width="40" />
                        </div>
                        <div>
                            <h4 class="mb-0 fw-bold text-dark">Yeni Hesap Oluştur</h4>
                            <div class="text-muted small">SGS Mail ekosistemine hızlıca katılın</div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-google-modern w-100 rounded-pill mb-4" onclick="googleNotReady()">
                        <img src="~/images/google.svg"
                             alt="google"
                             width="18"
                             class="me-2" />

          
                        Google ile hızlı kayıt ol
                    </button>


                    <div class="divider-text mb-4">
                        <span>veya form ile devam et</span>
                    </div>

                    <form asp-controller="Register"
                          asp-action="CreateUser"
                          method="post"
                          novalidate="novalidate">

                        @Html.AntiForgeryToken()

                        <div asp-validation-summary="ModelOnly" class="text-danger mb-2 small"></div>

                        <div class="row g-3">
                            <div class="col-12 col-md-6">
                                <label class="form-label-custom">Ad</label>
                                <input type="text" class="form-control input-modern" asp-for="Name" placeholder="Adınız" />
                                <span class="text-danger small" asp-validation-for="Name"></span>
                            </div>

                            <div class="col-12 col-md-6">
                                <label class="form-label-custom">Soyad</label>
                                <input type="text" class="form-control input-modern" asp-for="Surname" placeholder="Soyadınız" />
                                <span class="text-danger small" asp-validation-for="Surname"></span>
                            </div>

                            <div class="col-12">
                                <label class="form-label-custom">E-posta Adresi</label>
                                <input type="email" class="form-control input-modern" asp-for="Email" placeholder="ornek@mail.com" />
                                <span class="text-danger small" asp-validation-for="Email"></span>
                            </div>

                            <div class="col-12">
                                <label class="form-label-custom">Güçlü Şifre</label>
                                <div class="input-group">
                                    <input type="password" class="form-control input-modern border-end-0" asp-for="Password" placeholder="••••••••" id="pw" />
                                    <button class="btn btn-eye-modern" type="button" onclick="togglePw()">
                                        <i class="mdi mdi-eye-outline" id="eyeIcon"></i>
                                    </button>
                                </div>
                                <span class="text-danger small" asp-validation-for="Password"></span>

                                <div class="pw-requirements mt-2">
                                    <div class="req-item" id="req-length"><i class="mdi mdi-circle-small"></i> En az 8 karakter olmalı!</div>
                                    <div class="req-item" id="req-upper"><i class="mdi mdi-circle-small"></i> En az bir büyük harf</div>
                                    <div class="req-item" id="req-number"><i class="mdi mdi-circle-small"></i> En az bir rakam</div>
                                    <div class="req-item" id="req-symbol"><i class="mdi mdi-circle-small"></i> Sembol (!, @@, #)</div>
                                </div>

                                <div class="pw-meter-container mt-2">
                                    <div class="pw-bar" id="pwBar"></div>
                                </div>
                            </div>

                            <div class="col-12 mt-2">
                                <div class="col-12 mt-2">
                                    <div class="form-check custom-check">
                                        <input class="form-check-input"
                                               type="checkbox"
                                               id="termsChk"
                                               name="TermsAcceptedStr"
                                               value="true" />
                                        <label class="form-check-label small" for="termsChk">
                                            Kullanım
                                            <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#termsModal"
                                               class="text-primary fw-bold text-decoration-none">şartlarını</a>
                                            kabul ediyorum.
                                        </label>
                                    </div>
                                    <span class="text-danger small" asp-validation-for="TermsAcceptedStr"></span>
                                </div>

                            </div>

                            <div class="col-12 mt-3">
                                <button class="btn btn-primary-gradient w-100 rounded-pill py-2 fw-bold" type="submit">
                                    Hesabımı Oluştur
                                </button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>

            <div class="col-12 col-lg-5 d-none d-lg-flex side-panel">
                <div class="side-panel-content">
                    <div class="text-center top-badge-area">
                        <h2 class="fw-bold text-white lh-base hero-title mb-3">
                            Kurumsal İletişiminizi<br />
                            <span style="opacity:.9">Yeni Nesil Seviyeye Taşıyın</span>
                        </h2>

                        <p class="text-white opacity-75 small px-4">
                            Güvenli, hızlı ve modern e-posta deneyimiyle
                            profesyonel dünyaya güçlü bir başlangıç yapın.
                        </p>
                    </div>

                    <div class="logo-hero-area">
                        <div class="logo-blob"></div>
                        <img src="/images/mail.png" class="hero-logo-img" alt="Hero Logo" />
                    </div>

                    <div class="redirect-section p-4">
                        <p class="text-white opacity-75 small mb-2">Zaten bir hesabınız var mı?</p>
                        <a asp-controller="Login" asp-action="UserLogin" class="btn btn-blur-white w-100 rounded-pill fw-bold">
                            Giriş Yap
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content custom-modal-content">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold text-dark">Kullanım Şartları ve Gizlilik</h5>
                <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Kapat"></button>
            </div>
            <div class="modal-body px-4">
                <div class="terms-text">
                    <p class="fw-bold mb-1">1. Hizmetin Kapsamı</p>
                    <p class="text-muted small mb-3">Bu uygulama, kullanıcıların e-posta işlemlerini yönetebileceği profesyonel bir platformdur. Platform yalnızca yasal amaçlarla kullanılabilir.</p>

                    <p class="fw-bold mb-1">2. Kullanıcı Sorumlulukları</p>
                    <p class="text-muted small mb-3">Kullanıcılar; spam, dolandırıcılık veya sistemi kötüye kullanım faaliyetlerinde bulunmayacağını kabul eder.</p>

                    <p class="fw-bold mb-1">3. Veri Güvenliği</p>
                    <p class="text-muted small mb-3">Şifre güvenliği tamamen kullanıcının sorumluluğundadır.</p>

                    <p class="fw-bold mb-1">4. Kabul ve Onay</p>
                    <p class="text-muted small mb-0">Kayıt işlemini tamamlayan her kullanıcı bu şartları istisnasız kabul etmiş sayılır.</p>
                </div>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-light rounded-pill px-4 fw-bold small" data-bs-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>


<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        --input-bg: #f8fafc;
    }

    .custom-modal-content {
        border-radius: 24px;
        border: none;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }

    .terms-text {
        line-height: 1.6;
    }

    html, body {
        height: 100vh;
        margin: 0;
        overflow: hidden;
        background-color: #f1f5f9;
        font-family: 'Inter', sans-serif;
    }

    .auth-main-container {
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
    }

    .auth-card {
        background: white;
        width: 100%;
        max-width: 1100px;
        height: 85vh;
        border-radius: 30px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .form-side {
        height: 100%;
        overflow-y: auto;
        padding: 2.5rem;
        scrollbar-width: none;
    }

        .form-side::-webkit-scrollbar {
            display: none;
        }

    .form-content-wrapper {
        max-width: 450px;
        margin: 0 auto;
    }

    .brand-logo-circle {
        width: 50px;
        height: 50px;
        background: var(--input-bg);
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .input-modern {
        background: var(--input-bg);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 10px 15px;
        transition: 0.3s;
    }

        .input-modern:focus {
            border-color: #6366f1;
            background: white;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
            outline: none;
        }

    .btn-eye-modern {
        background: var(--input-bg);
        border: none;
        color: #94a3b8;
        border-radius: 0 12px 12px 0;
        padding-right: 15px;
    }

    .btn-primary-gradient {
        background: var(--primary-gradient);
        color: white;
        border: none;
        box-shadow: 0 10px 20px -5px rgba(168, 85, 247, 0.5);
        transition: 0.3s;
    }

        .btn-primary-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -5px rgba(168, 85, 247, 0.6);
            color: white;
        }

    .side-panel {
        background: linear-gradient(145deg, #4f46e5, #7c3aed);
        position: relative;
    }


    .side-panel-content {
        width: 100%;
        height: 100%;
        padding: 3rem;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        color: white;
    }

    .logo-hero-area {
        position: relative;
        width: 260px;
        height: 260px;
        display: flex;
        align-items: center;
        justify-content: center;
    }


    .logo-blob {
        position: absolute;
        width: 220px;
        height: 220px;
        background: rgba(255,255,255,.25);
        filter: blur(55px);
        border-radius: 50%;
        animation: pulse 4s infinite;
    }

    .hero-logo-img {
        width: 170px;
        z-index: 2;
        filter: drop-shadow(0 20px 30px rgba(0,0,0,.15));
        animation: float 4s ease-in-out infinite;
    }


    .btn-blur-white {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
    }

        .btn-blur-white:hover {
            background: white;
            color: #6366f1;
        }

    .pw-requirements {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4px;
    }

    .req-item {
        font-size: 0.7rem;
        color: #94a3b8;
    }

        .req-item.valid {
            color: #10b981;
            font-weight: bold;
        }

    .pw-meter-container {
        height: 5px;
        background: #e2e8f0;
        border-radius: 5px;
        overflow: hidden;
    }

    .pw-bar {
        height: 100%;
        width: 0;
        transition: 0.4s;
        background: #ef4444;
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-20px);
        }
    }

    @@keyframes pulse {
        0%, 100% {
            transform: scale(1);
            opacity: 0.2;
        }

        50% {
            transform: scale(1.5);
            opacity: 0.4;
        }
    }

    .divider-text {
        position: relative;
        text-align: center;
    }

        .divider-text::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 1px;
            background: #e2e8f0;
            z-index: 1;
        }

        .divider-text span {
            position: relative;
            z-index: 2;
            background: white;
            padding: 0 10px;
            color: #94a3b8;
            font-size: 0.75rem;
        }

    }

    .side-panel-content {
        padding: 3rem;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .redirect-section {
        margin-top: auto;
        padding-bottom: 10px;
    }

    .hero-title {
        font-size: 2.2rem;
        line-height: 1.3;
        letter-spacing: -0.5px;
    }

</style>

@section Scripts {
   
    <script>
        const pwInput = document.getElementById("pw");
        const bar = document.getElementById("pwBar");
        const reqs = {
            length: document.getElementById("req-length"),
            upper: document.getElementById("req-upper"),
            number: document.getElementById("req-number"),
            symbol: document.getElementById("req-symbol")
        };

        pwInput?.addEventListener("input", () => {
            const val = pwInput.value;
            let score = 0;
            const checks = {
                length: val.length >= 8,
                upper: /[A-Z]/.test(val),
                number: /[0-9]/.test(val),
                symbol: /[^A-Za-z0-9]/.test(val)
            };

            Object.keys(checks).forEach(key => {
                if (checks[key]) {
                    reqs[key].classList.add("valid");
                    score += 25;
                } else {
                    reqs[key].classList.remove("valid");
                }
            });

            bar.style.width = score + "%";
            bar.style.backgroundColor = score <= 25 ? "#ef4444" : score <= 75 ? "#f59e0b" : "#10b981";
        });

        function togglePw() {
            const pw = document.getElementById("pw");
            const icon = document.getElementById("eyeIcon");
            if (pw.type === "password") {
                pw.type = "text";
                icon.className = "mdi mdi-eye-off-outline";
            } else {
                pw.type = "password";
                icon.className = "mdi mdi-eye-outline";
            }
        }

        function googleNotReady() {
            alert("Google ile giriş yakında aktif edilecektir.");
        }
    </script>
}